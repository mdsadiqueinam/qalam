@import "tailwindcss";
@plugin "@tailwindcss/forms";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --animate-spin-slow: spin 9s linear infinite;

  --breakpoint-hub-md: 825px;
  --breakpoint-hub-lg: 1440px;
  --breakpoint-xs: 450px;

  --text-2xl: 2.14em;
  --text-xxl: 1.7em;
  --text-xl: 1.42em;
  --text-lg: 1.3em;
  --text-md: 1.1em;
  --text-sm: 1em;
  --text-nav: 0.92em;
  --text-tiny: 0.71em;

  --font-sans:
    "Noto Sans", ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",
    "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
  --font-serif: "Noto Serif", ui-serif, Georgia, serif;
  --font-weight-semibold: 500;

  --color-black: #2b2b29;

  --color-gray-1: #333333;
  --color-gray-5: #e0e0e0;
  --color-gray-c: #f7f7f7;

  --color-good: #66bb55;
  --color-bad: #f20101;
  --color-red: #f20101;
  --color-warning: #f59e0b;
  --color-warning-light: #fef3c7;
  --color-warning-dark: #92400e;
  --color-danger: #dc2626;
  --color-danger-light: #fecaca;
  --color-danger-dark: #991b1b;
  --color-past: #ed9121;
  --color-running: #128b32;

  --color-priority-high: var(--priority-high);
  --color-priority-medium: var(--priority-medium);
  --color-priority-low: var(--priority-low);
  --color-divider: var(--divider);
  --color-divider-subtle: var(--divider-subtle);
  --color-divider-hover: var(--divider-hover);
  --color-divider-outline: var(--divider-outline);
  --color-main: var(--main);
  --color-main-subtle-hover: var(--main-subtle-hover);
  --color-main-selected: var(--main-selected);
  --color-main-text: var(--main-text);
  --color-main-text-hover: var(--main-text-hover);
  --color-main-text-muted: var(--main-text-muted);
  --color-main-selected-text: var(--main-selected-text);
  --color-main-unselected-text: var(--main-unselected-text);
  --color-main-unselected: var(--main-unselected);
  --color-main-unselected-hover: var(--main-unselected-hover);
  --color-sidebar: var(--sidebar);
  --color-sidebar-text: var(--sidebar-text);
  --color-sidebar-text-hover: var(--sidebar-text-hover);
  --color-sidebar-text-selected: var(--sidebar-text-selected);
  --color-sidebar-hover: var(--sidebar-hover);
  --color-sidebar-selected: var(--sidebar-selected);
  --color-sidebar-unselected: var(--sidebar-unselected);
  --color-sidebar-unselected-hover: var(--sidebar-unselected-hover);
  --color-primary: var(--primary);
  --color-primary-hover: var(--primary-hover);
  --color-primary-text: var(--primary-text);
  --color-primary-text-hover: var(--primary-text-hover);
  --color-secondary: var(--secondary);
  --color-link-text: var(--secondary-text);
  --color-border-subtle: var(--border-subtle);
  --color-border-default: var(--border-default);
  --color-border-hover: var(--border-hover);
}

/* =========================================================
   4) BASE LAYER (must come AFTER tailwind import)
   ========================================================= */
@layer base {
  /* Tailwind v3 compatibility border rule */
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }

  body {
    font-size: 14px;
  }
  body.font-smaller {
    font-size: 12px;
  }
  body.font-small {
    font-size: 13px;
  }
  body.font-large {
    font-size: 15px;
  }
  body.font-larger {
    font-size: 16px;
  }

  :focus-visible {
    outline: 1px solid rgb(0, 89, 255);
  }

  :root,
  .light {
    /* Priority remains high-contrast */
    --priority-high: #ef4444;
    --priority-medium: #f59e0b;
    --priority-low: #10b981;

    /* Dividers: Soft sage/grey mix */
    --divider: #e2e8e2;
    --divider-subtle: #f0f4f066;
    --divider-hover: #d1dbd1;
    --divider-outline: #cbd5cb66;

    /* Main: Clean, slightly warm background */
    --main: #f9fbf9;
    --main-subtle-hover: #f0f7f0;
    --main-selected: #ecfdf5; /* Very light mint */
    --main-text: #1a2e1a; /* Deep forest charcoal */
    --main-text-hover: #064e3b;
    --main-text-muted: #6b7a6b;
    --main-selected-text: #169c16;
    --main-unselected: #f1f5f1;
    --main-unselected-text: #64748b;
    --main-unselected-hover: #e8eee8;

    /* Sidebar: Pure white with green accents */
    --sidebar: #ffffff;
    --sidebar-text: #4a5a4a;
    --sidebar-text-hover: #169c16;
    --sidebar-hover: #f0fdf4;
    --sidebar-selected: #dcfce7;
    --sidebar-unselected: #fcfdfc;
    --sidebar-unselected-hover: #f3f4f3;
    --sidebar-text-selected: #115e59;

    /* Primary (Kept as requested) */
    --primary: #169c16;
    --primary-hover: #128b14;
    --primary-text: #ffffff;
    --primary-text-hover: #f8f9fa;

    --secondary: #169c16;

    /* Borders */
    --border-subtle: #e5e9e5;
    --border-default: #d1d9d1;
    --border-hover: #169c16;
  }

  .dark {
    /* Dividers: Deep moss/carbon */
    --divider: #2d3a2d;
    --divider-subtle: #1e291e66;
    --divider-hover: #3a4a3a;
    --divider-outline: #455445aa;

    /* Main: Dark forest theme */
    --main: #0d130d;
    --main-subtle-hover: #162016;
    --main-text: #e2e8e2;
    --main-text-hover: #ffffff;
    --main-text-muted: #8a9a8a;
    --main-unselected: #1a241a;
    --main-unselected-text: #7c8a7c;
    --main-unselected-hover: #223022;
    --main-selected: #1e2e1e;
    --main-selected-text: #22c55e;

    /* Sidebar: Darker than main for depth */
    --sidebar: #090e09;
    --sidebar-text: #a0afa0;
    --sidebar-text-hover: #22c55e;
    --sidebar-text-selected: #ffffff;
    --sidebar-hover: #162016;
    --sidebar-selected: #1e2e1e;
    --sidebar-unselected: #090e09;
    --sidebar-unselected-hover: #141b14;

    /* Primary (Kept as requested) */
    --primary: #1eb81e;
    --primary-hover: #1aa01a;
    --primary-text: #ffffff;
    --primary-text-hover: #f5f7fa;

    --secondary: #1eb81e;

    /* Borders */
    --border-subtle: #243124;
    --border-default: #2d3a2d;
    --border-hover: #1eb81e;
  }
}

/* =========================================================
   5) CUSTOM UTILITIES
   ========================================================= */
@utility custom-wrap-360 {
  @media (max-width: 360px) {
    flex-wrap: wrap;
  }
}

@utility show-at-320 {
  @media (min-width: 360px) {
    display: block;
  }
}

@layer utilities {
  .btn {
    @apply flex items-center whitespace-nowrap rounded-lg border border-transparent bg-white px-4 py-2 text-center text-sm font-medium text-black transition-colors duration-150 hover:bg-white/90 focus:outline-hidden active:bg-gray-100 active:text-gray-700;
  }

  .status-change-enter-active,
  .status-change-leave-active {
    transition: all 0.3s ease;
  }

  .status-change-enter-from {
    transform: scale(0.8) rotate(-180deg);
  }

  .status-change-leave-to {
    transform: scale(0.8) rotate(10deg);
  }

  ::-webkit-scrollbar {
    width: 0px;
    height: 0px;
  }
  ::-webkit-scrollbar-track {
    background: none;
  }
  ::-webkit-scrollbar-thumb {
    background: none;
  }
  ::-webkit-scrollbar-thumb:hover {
    background: none;
  }
}

.spinner {
  @apply w-8 h-8 border-2 border-solid border-primary rounded-full border-t-transparent animate-spin;
}

button {
  @apply cursor-pointer;
}
